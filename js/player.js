// 初始化玩家数据
let player = {
    name: "勇者",
    gold: 0,
    diamond: 0,
    titanium: 0,
    starstone: 0,
    cosmicstone: 0,
    superstone: 0,
    otherworldstone: 0,
    xingjiestone: 0,
    hundunstone: 0,
    lingtone: 0,
    huangtone: 0,
    mingtone: 0,
    reincarnationCoin: 0,
    reincarnationCount: 0,
    equipment: [],
    usedActivationCodes: [],
    class: null, // 当前职业: null, 'warrior', 'mage'
    classBranches: [], // 已选择的分支 [0, 2, 1] 表示第1排选第0个，第2排选第2个等
    classBonuses: { // 新增：存储职业分支选择的加成
        soulRingMultiplier: 1,    // 魂环总加成乘数（默认1倍）
        dungeonEquipMultiplier: 1 // 副本装备总加成乘数（默认1倍）
    },
    mystery: {
        stage: 1,
        level: 1,
        exp: 0,
        bonus: 1, // 默认加成1倍
        lastUpdateTime: Date.now() // 添加这个字段
    },
    officialLevel: 0, // 官职等级，初始为0
    officialBonus: 1, // 初始加成1倍
    vip: {
        level: 1,
        power: 0, // 累计VIP能力值数量
    },
    bossBattleSnapshot: {
        playerAttack: 0,
        playerMultiAttack: 0,
        playerCritRate: 0,
        playerCritDamage: 0
    },
    companionChestGuarantee: {
        epic: 0,     // 史诗保底计数器
        pink: 0,     // 卓越保底计数器
        orange: 0,  // 完美保底计数器
        red: 0       // 神赐保底计数器
    },
    tower: {
        currentFloor: 0,
        maxFloor: 0,
        isAutoAttacking: false,
        autoAttackInterval: null,
        battleLog: [],
        playerHealth: 0,
        playerAttack: 0,
        playerCritRate: 0,
        playerCritDamage: 0,
        monster: null
    },
    companions: [], // 伴侣列表
    equippedCompanionId: null, // 当前装备的伴侣ID
    companionLevel: 1, // 共享的伴侣等级
    autoDecompose: {
        enabled: false,
        belowRarity: 'white' // 默认分解普通及以下
    },
    items: {
        primaryGem: 0,
        advancedGem: 0,
        superiorGem: 0,
        divineGem: 0,
        refineStone: 0,
        rose: 0, // 玫瑰花
        companionKey: 0 // 伴侣钥匙
    },
    collections: {
        lightSpeedHand: 0,
        empHand: 0,
        godlyHand: 0,
        quickHand: 0,
        shadowHand: 0,
        quantumHand: 0,
        lightningHand: 0,
        divineHand: 0
    },
    pets: {
        thunderKirin: { level: 0, cost: 1, multiplier: 0.10 },
        chaosTaotie: { level: 0, cost: 1, multiplier: 0.50 },
        netherQiongqi: { level: 0, cost: 1, multiplier: 2.50 },
        abyssKun: { level: 0, cost: 1, multiplier: 12.50 },
        primordialZhuLong: { level: 0, cost: 1, multiplier: 62.50 },
        wanJunSuanNi: { level: 0, cost: 1, multiplier: 312.50 },
        yanYuBiAn: { level: 0, cost: 1, multiplier: 1562.50 },
        yuyu1: { level: 0, cost: 1, multiplier: 7812.50 },
        yuyu2: { level: 0, cost: 1, multiplier: 39062.50 },
        yuyu3: { level: 0, cost: 1, multiplier: 195312.50 },
        yuyu4: { level: 0, cost: 1, multiplier: 976562.50 },
        yuyu5: { level: 0, cost: 1, multiplier: 5882812.50 }

    },
    dungeonEquipment: [],
    techniques: {},
    soulRings: [],
    attributes: {
        totalPoints: 0,
        remainingPoints: 0,
        health: 0,
        attack: 0,
        critRate: 0,
        critDamage: 0,
        multiAttack: 0,
        block: 0
    },
    lastUpdate: Date.now(),
    achievements: {
        "first_equipment": false,
        "first_rare": false,
        "first_epic": false,
        "first_legendary": false,
        "first_ancient": false,
        "first_divine": false,
        "first_arcane": false,
        "first_celestial": false,
        "first_infernal": false,
        "first_astral": false,
        "first_primeval": false,
        "first_transcendental": false,
        "first_quantum": false,
        "first_ultimate": false,
        "first_chaos": false,
        "first_eternal": false,
        "first_void": false,
        "first_genesis": false,
        "first_divineRealm": false,
        "first_apocalypse": false,
        "first_yeyu1": false,
        "first_yeyu2": false,
        "first_yeyu3": false,
        "first_yeyu4": false,
        "first_yeyu5": false,
        "first_yeyu6": false,
        "first_yeyu7": false,
        "first_yeyu8": false,
        "first_yeyu9": false,
        "first_yeyu10": false,
        "first_yeyu11": false,
        "first_yeyu12": false,
        "first_yeyu13": false,
        "first_yeyu14": false,
        "first_yeyu15": false,
        "common_chest_100": false,
        "common_chest_10000": false,
        "common_chest_1000000": false,
        "common_chest_10000000": false,
        "common_chest_100000000": false,
        "advanced_chest_100": false,
        "advanced_chest_10000": false,
        "advanced_chest_1000000": false,
        "advanced_chest_10000000": false,
        "advanced_chest_100000000": false,
        "rare_chest_100": false,
        "rare_chest_10000": false,
        "rare_chest_1000000": false,
        "rare_chest_10000000": false,
        "rare_chest_100000000": false,
        "epic_chest_100": false,
        "epic_chest_10000": false,
        "epic_chest_1000000": false,
        "epic_chest_10000000": false,
        "epic_chest_100000000": false,
        "legendary_chest_100": false,
        "legendary_chest_10000": false,
        "legendary_chest_1000000": false,
        "legendary_chest_10000000": false,
        "legendary_chest_100000000": false,
        "chaos_chest_100": false,
        "chaos_chest_10000": false,
        "chaos_chest_1000000": false,
        "chaos_chest_10000000": false,
        "chaos_chest_100000000": false,
        "apocalypse_chest_100": false,
        "apocalypse_chest_10000": false,
        "apocalypse_chest_1000000": false,
        "apocalypse_chest_10000000": false,
        "apocalypse_chest_100000000": false,
        "yeyu1_chest_100": false,
        "yeyu1_chest_10000": false,
        "yeyu1_chest_1000000": false,
        "yeyu1_chest_10000000": false,
        "yeyu1_chest_100000000": false,
        "yeyu2_chest_100": false,
        "yeyu2_chest_10000": false,
        "yeyu2_chest_1000000": false,
        "yeyu2_chest_10000000": false,
        "yeyu2_chest_100000000": false,
        "yeyu3_chest_100": false,
        "yeyu3_chest_10000": false,
        "yeyu3_chest_1000000": false,
        "yeyu3_chest_10000000": false,
        "yeyu3_chest_100000000": false,
        "yeyu4_chest_100": false,
        "yeyu4_chest_10000": false,
        "yeyu4_chest_1000000": false,
        "yeyu4_chest_10000000": false,
        "yeyu4_chest_100000000": false,
        "yeyu5_chest_100": false,
        "yeyu5_chest_10000": false,
        "yeyu5_chest_1000000": false,
        "yeyu5_chest_10000000": false,
        "yeyu5_chest_100000000": false,
        "max_stage_10": false,
        "max_stage_30": false,
        "max_stage_60": false,
        "max_stage_90": false,
        "max_stage_120": false,
        "max_stage_200": false,
        "max_stage_300": false,
        "max_stage_400": false,
        "max_stage_500": false,
        "max_stage_600": false,
        "max_stage_700": false,
        "max_stage_800": false,
        "max_stage_900": false,
        "max_stage_1000": false,

        // 新增宠物成就状态
        "thunderKirin_10": false,
        "thunderKirin_50": false,
        "thunderKirin_100": false,
        "chaosTaotie_10": false,
        "chaosTaotie_50": false,
        "chaosTaotie_100": false,
        "netherQiongqi_10": false,
        "netherQiongqi_50": false,
        "netherQiongqi_100": false,
        "abyssKun_10": false,
        "abyssKun_50": false,
        "abyssKun_100": false,
        "primordialZhuLong_10": false,
        "primordialZhuLong_50": false,
        "primordialZhuLong_100": false,
        "wanJunSuanNi_10": false,
        "wanJunSuanNi_50": false,
        "wanJunSuanNi_100": false,
        "yanYuBiAn_10": false,
        "yanYuBiAn_50": false,
        "yanYuBiAn_100": false,
        "yuyu1_10": false,
        "yuyu1_50": false,
        "yuyu1_100": false,
        "yuyu2_10": false,
        "yuyu2_50": false,
        "yuyu2_100": false,
        "yuyu3_10": false,
        "yuyu3_50": false,
        "yuyu3_100": false,
        "yuyu4_10": false,
        "yuyu4_50": false,
        "yuyu4_100": false,
        "yuyu5_10": false,
        "yuyu5_50": false,
        "yuyu5_100": false,

        // 新增魂环成就状态
        "year1_10": false,
        "year10_10": false,
        "year100_10": false,
        "year1000_10": false,
        "year10000_10": false,
        "year100000_10": false,
        "year1000000_10": false,
        "year10000000_10": false,
        "year100000000_10": false,
        "year1_100": false,
        "year10_100": false,
        "year100_100": false,
        "year1000_100": false,
        "year10000_100": false,
        "year100000_100": false,
        "year1000000_100": false,
        "year10000000_100": false,
        "year100000000_100": false,
        "year1_1000": false,
        "year10_1000": false,
        "year100_1000": false,
        "year1000_1000": false,
        "year10000_1000": false,
        "year100000_1000": false,
        "year1000000_1000": false,
        "year10000000_1000": false,
        "year100000000_1000": false,
        "year1_10000": false,
        "year10_10000": false,
        "year100_10000": false,
        "year1000_10000": false,
        "year10000_10000": false,
        "year100000_10000": false,
        "year1000000_10000": false,
        "year10000000_10000": false,
        "year100000000_10000": false,
        "year2_10": false,
        "year2_100": false,
        "year2_1000": false,
        "year2_10000": false,
        "year3_10": false,
        "year3_100": false,
        "year3_1000": false,
        "year3_10000": false,
        "year4_10": false,
        "year4_100": false,
        "year4_1000": false,
        "year4_10000": false,
        "year5_10": false,
        "year5_100": false,
        "year5_1000": false,
        "year5_10000": false,
        "year6_10": false,
        "year6_100": false,
        "year6_1000": false,
        "year6_10000": false,
        "year7_10": false,
        "year7_100": false,
        "year7_1000": false,
        "year7_10000": false,
        "year8_10": false,
        "year8_100": false,
        "year8_1000": false,
        "year8_10000": false,
        "year9_10": false,
        "year9_100": false,
        "year9_1000": false,
        "year9_10000": false,
        "year11_10": false,
        "year11_100": false,
        "year11_1000": false,
        "year11_10000": false,
        "year12_10": false,
        "year12_100": false,
        "year12_1000": false,
        "year12_10000": false,
        "year13_10": false,
        "year13_100": false,
        "year13_1000": false,
        "year13_10000": false,
        "year14_10": false,
        "year14_100": false,
        "year14_1000": false,
        "year14_10000": false,
        "year15_10": false,
        "year15_100": false,
        "year15_1000": false,
        "year15_10000": false,
        "year16_10": false,
        "year16_100": false,
        "year16_1000": false,
        "year16_10000": false,
        "year17_10": false,
        "year17_100": false,
        "year17_1000": false,
        "year17_10000": false,
        "year18_10": false,
        "year18_100": false,
        "year18_1000": false,
        "year18_10000": false,
        "year19_10": false,
        "year19_100": false,
        "year19_1000": false,
        "year19_10000": false,
        "year20_10": false,
        "year20_100": false,
        "year20_1000": false,
        "year20_10000": false,
        "year21_10": false,
        "year21_100": false,
        "year21_1000": false,
        "year21_10000": false,
        "year22_10": false,
        "year22_100": false,
        "year22_1000": false,
        "year22_10000": false,
        "year23_10": false,
        "year23_100": false,
        "year23_1000": false,
        "year23_10000": false,
        "year24_10": false,
        "year24_100": false,
        "year24_1000": false,
        "year24_10000": false,
        "year25_10": false,
        "year25_100": false,
        "year25_1000": false,
        "year25_10000": false,
        "year26_10": false,
        "year26_100": false,
        "year26_1000": false,
        "year26_10000": false,
        "year27_10": false,
        "year27_100": false,
        "year27_1000": false,
        "year27_10000": false,
        "year28_10": false,
        "year28_100": false,
        "year28_1000": false,
        "year28_10000": false,
        "year29_10": false,
        "year29_100": false,
        "year29_1000": false,
        "year29_10000": false,
        "year30_10": false,
        "year30_100": false,
        "year30_1000": false,
        "year30_10000": false,
        "year31_10": false,
        "year31_100": false,
        "year31_1000": false,
        "year31_10000": false,
        "year32_10": false,
        "year32_100": false,
        "year32_1000": false,
        "year32_10000": false,
        "year33_10": false,
        "year33_100": false,
        "year33_1000": false,
        "year33_10000": false,
        "year34_10": false,
        "year34_100": false,
        "year34_1000": false,
        "year34_10000": false,
        "year35_10": false,
        "year35_100": false,
        "year35_1000": false,
        "year35_10000": false,
        "year36_10": false,
        "year36_100": false,
        "year36_1000": false,
        "year36_10000": false,
        "year37_10": false,
        "year37_100": false,
        "year37_1000": false,
        "year37_10000": false,
        "world_boss_1st": false,
        "world_boss_top5": false,
        "world_boss_top10": false,
        "world_boss_participant": false,
        "reincarnation_10": false,
        "reincarnation_100": false,
        "reincarnation_1000": false,
        "reincarnation_10000": false
    },
    actionLogs: [],
    goldLogs: [],
    autoBuy: [false, false, false, false, false, false, false, false, false, false, false, false],
    autoBuySpeedBoost: false,
    onlineBoostEnabled: false,
    autoBuyMaterialChest: false,
    gpsMultiplier: 1,
    clickMultiplier: 1,
    autoConvert: false,
    autoConvertCurrency: {
        gold: false,
        diamond: false,
        titanium: false,
        starstone: false
    },
    clickTimestamps: [],
    chestCounts: {
        common: 0,
        advanced: 0,
        rare: 0,
        epic: 0,
        legendary: 0
    },
    reincarnationStats: {
        gpsBonus: { level: 0, cost: 1 },
        equipmentLevelBonus: { level: 0, cost: 1 },
        clickLimitBonus: { level: 0, cost: 1 }
    },
    materialChestCost: 1,
    techniqueChestCost: 1,
    stockData: {
        stocks: [
            { name: '青龙至尊股', basePrice: 1, currentPrice: 1, lastPrice: 1, shares: 0, avgCost: 0 },
            { name: '白虎至尊股', basePrice: 10, currentPrice: 10, lastPrice: 10, shares: 0, avgCost: 0 },
            { name: '朱雀至尊股', basePrice: 100, currentPrice: 100, lastPrice: 100, shares: 0, avgCost: 0 },
            { name: '玄武至尊股', basePrice: 1000, currentPrice: 1000, lastPrice: 1000, shares: 0, avgCost: 0 },
            { name: '瑞兽白泽股', basePrice: 10000, currentPrice: 10000, lastPrice: 10000, shares: 0, avgCost: 0 }
        ],
        lastStockUpdate: Date.now()
    },
    lotteryResults: [],
    traditionalLotteryNumbers: [],
    lastLotteryDraw: Date.now(),
    titles: {
        unlocked: [], // 已解锁称号列表
        current: null // 当前选择的称号
    },
    bank: {
        deposit: 0,
        lastInterestUpdate: Date.now()
    },
    battle: {
        currentStage: 0,
        maxStage: 0,
        monster: null,
        playerHealth: 0,
        playerAttack: 0,
        playerCritRate: 0.1,
        playerCritDamage: 1.5,
        playerAccuracy: 0.9,
        playerDodge: 0.1
    }
};